# -*- coding: utf-8 -*-
--- !testcase
testcase_id: TD_COAP_CORE_01_v01
uri : http://f-interop.rennes.inria.fr/tests/TD_COAP_CORE_01_v01
configuration: COAP_CFG_01_v01
objective: Perform GET transaction(CON mode)
pre_conditions: Server offers the resource /test with resource content is not empty that handles GET with an arbitrary payload
references: '[COAP] 5.8.1, 1.2, 2.1, 2.2, 3.1'
sequence:
  - step_id: 'TD_COAP_CORE_01_v01_step_01'
    type: stimuli
    node : coap_client
    description:
      - Client is requested to send a GET request with
      - - Type = 0(CON)
      - - Code = 1(GET)

  - step_id: TD_COAP_CORE_01_v01_step_02
    type: check
    description:
      - The request sent by the client contains
      - - Type=0 and Code=1
      - - Client-generated Message ID(\u2794 CMID)
      - - Client-generated Token(\u2794 CTOK)
      - - Uri-Path option "test"

  - step_id: TD_COAP_CORE_01_v01_step_03
    type: check
    description:
        - Server sends response containing
        - - Code = 2.05(Content)
        - - Message ID = CMID, Token = CTOK
        - - Content-format option
        - - Non-empty Payload

  - step_id: TD_COAP_CORE_01_v01_step_04
    type: verify
    node: coap_client
    description:
        - Client displays the received information

--- !testcase
testcase_id : TD_COAP_CORE_02_v01
uri : http://f-interop.rennes.inria.fr/tests/TD_COAP_CORE_02_v01
objective: Perform DELETE transaction (CON mode)
configuration: COAP_CFG_01_v01
references: "[COAP] 5.8.4, 1.2, 2.1, 2.2, 3.1"
pre_conditions: Server offers a /test resource that handles DELETE
sequence:

  - step_id : TD_COAP_CORE_02_v01_step_01
    type : stimuli
    node : coap_client
    description:
      - 'Client is requested to send a DELETE request with:'
      - - Type = 0 (CON)
        - Code = 4 (DELETE)

  - step_id : TD_COAP_CORE_02_v01_step_02
    type : check
    description:
      - 'The request sent by the client contains:'
      - - Type=0 and Code=4
        # - <<: *CMID
        - Client-generated Message ID (➔ CMID)
        #- *CTOK
        - Client-generated Token (➔ CTOK)
        #- *UTEST
        - UTEST Uri-Path option "test"

  - step_id : TD_COAP_CORE_02_v01_step_03
    type : check
    description:
      - 'Server sends response containing:'
      - - Code = 2.02 (Deleted)
        #- *SAME_MID_TOKEN
        - SAME_MID_TOKEN Message ID = CMID, Token = CTOK
        #- *CFONE
        - CFONE Content-format option if payload non-empty
        #- *ONEP
        - ONEP Empty or non-empty Payload

  - step_id : TD_COAP_CORE_02_v01_step_04
    type : verify
    node : coap_client
    description:
        - Client displays the received information

--- !testcase
  testcase_id : TD_COAP_CORE_03_v01
  uri : http://f-interop.rennes.inria.fr/tests/TD_COAP_CORE_03_v01
  objective: Perform PUT transaction (CON mode)
  configuration: COAP_CFG_01_v01
  references: "[COAP] 5.8.3, 1.2, 2.1, 2.2, 3.1"
  pre_conditions: Server offers already available resource /test or accepts creation of new
    resource on /test that handles PUT
  sequence:

  - step_id : TD_COAP_CORE_03_v01_step_01
    type : stimuli
    node : coap_client
    description:
      - 'Client is requested to send a PUT request with:'
      - - Type = 0 (CON)
        - Code = 3 (PUT)
        #- *CFO
        - CFO Content-format option
        #- *ONEP
        - ONEP Empty or non-empty Payload

  - step_id : TD_COAP_CORE_03_v01_step_02
    type : check
    description:
      - 'The request sent by the client contains:'
      - - Type=0 and Code=3
        #- *CMID
        - Client-generated Message ID (➔ CMID)
        #- *CTOK
        - Client-generated Token (➔ CTOK)
        #- *UTEST
        - UTEST Uri-Path option "test"

  - step_id : TD_COAP_CORE_03_v01_step_03
    type : verify
    node : coap_client
    description:
      - Server displays received information

  - step_id : TD_COAP_CORE_03_v01_step_04
    type : check
    description:
      - 'Server sends response containing:'
      - - Code = 2.04 (Changed) or 2.01 (Created)
        #- *SAME_MID_TOKEN
        - SAME_MID_TOKEN Message ID = CMID, Token = CTOK
        #- *CFONE
        - CFONE Content-format option if payload non-empty
        #- *ONEP
        - ONEP Empty or non-empty Payload

  - step_id : TD_COAP_CORE_03_v01_step_05
    type : verify
    node : coap_client
    description:
      - Client displays the received response

