# -*- coding: utf-8 -*-
--- !testcase
testcase_id: TD_LWM2M_1.0_INT_101
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: Test that the Client registers with the Server.
pre_conditions:
  - Device is turned on
  - The bootstrap procedure has been completed or the required bootstrap information is available to the client
  - The client contains the following mandatory LWM2M 1.0 objects instances 
  - - LWM2M Server Object (ID = 1) Instance 0 with mandatory resources and Short Server ID = 1
  - - LWM2M Security Object (ID = 0) Instance 0 with mandatory resources and Bootstrap Server = False
  - - LWM2M Device Object (ID = 3) Instance 0 with mandatory resources.
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_101_step_01'
    type: stimuli
    node : Client
    description:
      - 'Client is requested to send a regestration (COAP POST) to Server'
      - - Type = 0 (CON)
        - Code = 2 (POST)

  - step_id: 'TD_LWM2M_1.0_INT_101_step_02'
    type: check
    description:
      - 'The request sent by the client contains'
      - - Type=0 and Code=2


  - step_id: 'TD_LWM2M_1.0_INT_101_step_03'
    type: check
    description:
        - 'Server sends response containing'
        - - Code = 2.01(Created)
          - Endppoint Client Name
          - Registration lifetime (optional)
          - LWM2M version (optional)
          - Binding mode (optional)
          - SMS number (optional)
          - Objects and Object Instances (mandatory and optional objects/ object instances) 

  - step_id: 'TD_LWM2M_1.0_INT_101_step_04'
    type: verify
    node: Client
    description:
        - 'Client has received Success message from Server'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_102
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: Test that the Client updates the registration information on the server.
pre_conditions:
  - Need exists to re-register, e.g, previous registration has expired
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_102_step_01'
    type: stimuli
    node : Client
    description:
      - 'Client is requested to send a re-regestration (COAP PUT) to Server'
      - - Type = 0 (CON)
        - Code = 3 (PUT)

  - step_id: 'TD_LWM2M_1.0_INT_102_step_02'
    type: check
    description:
      - 'The request sent by the client contains'
      - - Type=0 and Code=3


  - step_id: 'TD_LWM2M_1.0_INT_102_step_03'
    type: check
    description:
        - 'Server sends response containing'
        - - Code = 2.04(Changed)
          - Endpoint Client Name
          - Registration lifetime (optional)
          - LWM2M version (optional)
          - Binding mode (optional)
          - SMS number (optional)
          - Objects and Object Instances (optional) 

  - step_id: 'TD_LWM2M_1.0_INT_102_step_04'
    type: verify
    node: Client
    description:
        - 'Client has received Success message from Server'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_103
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: Test that the Client is able to deregister at the server.
pre_conditions:
  - Client is registred
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_103_step_01'
    type: stimuli
    node : Client
    description:
      - 'Client is requested to send a de-regestration (COAP DELETE) to Server'
      - - Type = 0 (CON)
        - Code = 4 (DELETE)

  - step_id: 'TD_LWM2M_1.0_INT_103_step_02'
    type: check
    description:
      - 'The request sent by the client contains'
      - - Type=0 and Code=4


  - step_id: 'TD_LWM2M_1.0_INT_103_step_03'
    type: check
    description:
        - 'Server sends response containing'
        - - Code = 2.02(Deleted)

  - step_id: 'TD_LWM2M_1.0_INT_103_step_04'
    type: verify
    node: Client
    description:
        - 'Client is removed from the servers registration database'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_104
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: Test that the Client registers with the Server when triggered with Registration Update Trigger.
pre_conditions:
  - Device is turned on. 
  - The bootstarp procedure has been completed or the required bootstarp information is available to the client.
  - The client has a LWM2M Server Object Instance. 
  - The device is registred with the server. 
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_104_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server is requested to set Binding by sending COAP PUT 1/7 with string content to client'
      - - Type = 0 (CON)
        - Code = 3 (PUT)

  - step_id: 'TD_LWM2M_1.0_INT_104_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=3
        - payload = "U"

  - step_id: 'TD_LWM2M_1.0_INT_104_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.04 (Changed)

  - step_id: 'TD_LWM2M_1.0_INT_104_step_04'
    type: verify
    node: Server
    description:
        - 'Device registration expires on the server (for test purpose a short registration lifetime could be chosen'

  - step_id: 'TD_LWM2M_1.0_INT_104_step_05'
    type: stimuli
    node : Server
    description:
      - 'Server is requested to send a Registration Update Trigger message (COAP POST 1/8) to client'
      - - Type = 0 (CON)
        - Code = 2 (POST)

  - step_id: 'TD_LWM2M_1.0_INT_104_step_06'
    type: stimuli
    node : Client
    description:
      - 'Client is requested to re-register bu sending COAP PUT message to Server via UDP'
      - - Type = 0 (CON)
        - Code = 3 (PUT)

  - step_id: 'TD_LWM2M_1.0_INT_104_step_07'
    type: check
    description:
        - 'The request sent by the client contains'
        - - Type=0 and Code=3

  - step_id: 'TD_LWM2M_1.0_INT_104_step_08'
    type: check
    description:
        - 'Server sends response containing'
        - - Code = 2.04 (Changed)
          - Endpoint Client Name
          - Registration lifetime (optional)
          - LWM2M version (optional)
          - Binding mode (optional)
          - SMS number (optional)
          - Objects and Object Instances (optional) 

  - step_id: 'TD_LWM2M_1.0_INT_104_step_09'
    type: verify
    node: Client
    description:
        - 'Client has received Success message from Server'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_105
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: Test that the Client registers with the Bootstrap Server.
pre_conditions:
  - Device is turned on
  - The required bootstrap Server Bootstrap information is available to the Client. 
  - The client contains the following mandatory LWM2M 1.0 objects instances 
  - - LWM2M Server Object (ID = 1) Instance 0 with mandatory resources and Short Server ID = 1
  - - LWM2M Security Object (ID = 0) Instance 0 with mandatory resources and Bootstrap Server = True
  - - LWM2M Device Object (ID = 3) Instance 0 with mandatory resources.
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence: http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
  - step_id: 'TD_LWM2M_1.0_INT_105_step_01'
    type: stimuli
    node : Client
    description:
      - 'Client is requested to send a regestration (COAP POST) to Bootstrap Server'
      - - Type = 0 (CON)
        - Code = 2 (POST)

  - step_id: 'TD_LWM2M_1.0_INT_105_step_02'
    type: check
    description:
      - 'The request sent by the client contains'
      - - Type=0 and Code=2


  - step_id: 'TD_LWM2M_1.0_INT_105_step_03'
    type: check
    description:
        - 'Bootstrap Server sends response containing'
        - - Code = 2.01 (Created)
          - Endppoint Client Name
          - Registration lifetime (optional)
          - LWM2M version (optional)
          - Binding mode (optional)
          - SMS number (optional)
          - Objects and Object Instances (mandatory and optional objects/ object instances) 

  - step_id: 'TD_LWM2M_1.0_INT_105_step_04'
    type: verify
    node: Client
    description:
        - 'Client has received Success message from Bootstrap Server'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_201
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Quering the following data on the client (Device Object = ID 3) in text plain format
  - - Manufacturer
    - Model number
    - Serial number
pre_conditions: Device is registred at the LWM2M server
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_201_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server sends a READ request (COAP GET) on device object resources'
      - - Type = 0 (CON)
        - Code = 1 (GET)

  - step_id: 'TD_LWM2M_1.0_INT_201_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=1
        - Accept option = text/plain


  - step_id: 'TD_LWM2M_1.0_INT_201_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.05 (Content)
          - Manufacturer
          - Model number
          - Serial number

  - step_id: 'TD_LWM2M_1.0_INT_201_step_04'
    type: verify
    node: Server
    description:
        - 'Requested data is successfully displayed'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_203
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Quering the following data on the client (Device Object = ID 3) in TLV format
  - - Manufacturer
    - Model number
    - Serial number
pre_conditions: Device is registred at the LWM2M server
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_203_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server sends a READ request (COAP GET) on device object resources'
      - - Type = 0 (CON)
        - Code = 1 (GET)

  - step_id: 'TD_LWM2M_1.0_INT_203_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=1
        - Accept option = application/vnd.oma.lwm2m+tlv


  - step_id: 'TD_LWM2M_1.0_INT_203_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.05 (Content)
          - Manufacturer
          - Model number
          - Serial number

  - step_id: 'TD_LWM2M_1.0_INT_203_step_04'
    type: verify
    node: Server
    description:
        - 'Requested data is successfully displayed'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_204
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Quering the following data on the client (Device Object = ID 3) in JSON format
  - - Manufacturer
    - Model number
    - Serial number
pre_conditions: Device is registred at the LWM2M server
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_204_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server sends a READ request (COAP GET) on device object resources'
      - - Type = 0 (CON)
        - Code = 1 (GET)

  - step_id: 'TD_LWM2M_1.0_INT_204_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=1
        - Accept option = application/vnd.oma.lwm2m+json


  - step_id: 'TD_LWM2M_1.0_INT_204_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.05 (Content)
          - Manufacturer
          - Model number
          - Serial number

  - step_id: 'TD_LWM2M_1.0_INT_204_step_04'
    type: verify
    node: Server
    description:
        - 'Requested data is successfully displayed'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_205
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Setting the writable resources of object 1 (Server Object = ID 1)
  - - Lifetime
    - Default minimum period 
    - Default maximum period
    - Disable timeout
    - Notification storing when disabled or offline
    - Binding
pre_conditions: Device is registred with the server.
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_205_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server sends a WRITE request (COAP PUT/POST) on device object resource'
      - - Type = 0 (CON)
        - Code = 2 (POST) or 3 (PUT) 

  - step_id: 'TD_LWM2M_1.0_INT_205_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=Any(2,3)
        - Non-empty payload


  - step_id: 'TD_LWM2M_1.0_INT_205_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.04 (Changed)
          - Non-empty payload = Represention of the updated object

  - step_id: 'TD_LWM2M_1.0_INT_205_step_04'
    type: verify
    node: Server
    description:
        - 'Requested data is successfully updated'

--- !testcase
testcase_id: TD_LWM2M_1.0_INT_241
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Test that rebooting of the device remotely through the server is possible (Device Object = ID 3)
pre_conditions: Device is switched on and registred with the server. (De might be in a state that requires a reboot)
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_241_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server performs Execute (CoAP POST) on device/ reboot resource'
      - - Type = 0 (CON)
        - Code = 2 (POST)

  - step_id: 'TD_LWM2M_1.0_INT_241_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=2

  - step_id: 'TD_LWM2M_1.0_INT_241_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.04 (Changed)

  - step_id: 'TD_LWM2M_1.0_INT_241_step_04'
    type: verify
    node: Server
    description:
        - 'Device reboots successfully and re-registers at the server again.'
        
--- !testcase
testcase_id: TD_LWM2M_1.0_INT_301
uri : http://openmobilealliance.org/iot/lightweight-m2m-lwm2m
configuration: LWM2M_CFG_01
objective: 
  - Test that rebooting of the device remotely through the server is possible (Device Object = ID 3)
pre_conditions: Device is switched on and registred with the server. (De might be in a state that requires a reboot)
notes: null
references: 'OMA-ETS-LightweightM2M-V1_0-20160829-C'
sequence:
  - step_id: 'TD_LWM2M_1.0_INT_301_step_01'
    type: stimuli
    node : Server
    description:
      - 'Server performs Execute (CoAP POST) on device/ reboot resource'
      - - Type = 0 (CON)
        - Code = 2 (POST)

  - step_id: 'TD_LWM2M_1.0_INT_301_step_02'
    type: check
    description:
      - 'The request sent by the server contains'
      - - Type=0 and Code=2

  - step_id: 'TD_LWM2M_1.0_INT_301_step_03'
    type: check
    description:
        - 'Client sends response containing'
        - - Code = 2.04 (Changed)

  - step_id: 'TD_LWM2M_1.0_INT_301_step_04'
    type: verify
    node: Server
    description:
        - 'Device reboots successfully and re-registers at the server again.'

